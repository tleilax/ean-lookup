(function(e){var t,i,n,r,a,s,o,d;return o=e(".thumbnails"),o.on("click","a.modal-image",function(){var t,i;return t=e(this).attr("href"),i=e(this).data().target,e(".modal-body img",i).attr("src",t),e(i).modal(),!1}),o.on("click",".close-trigger",function(){return e(this).closest("li").hide("slow"),!1}),n=o.children("li"),d=n.length,0!==d?(a=n.length,r=e('<div class="progress"><div class="bar" style="width:0%;"></div></div>').insertBefore(o),s=[],t=function(){var t,i,n;return a-=1,n=100*(1-a/d),e(".bar",r).css({width:""+n.toFixed(2)+"%"}),0===a?(t=0,i=100,s.sort(function(e,t){var i,n;return i=parseInt(t.data().resolution,10),n=parseInt(e.data().resolution,10),i-n}),r.remove(),e.each(s,function(){var e=this;return o.append(this),setTimeout(function(){return e.show("slide")},t),t+=i})):void 0},n.each(function(){var i,n,r;return n=new Image,r=e(".original-image",this).attr("href"),i=e(this).hide(),n.onload=function(){var n,r;return r=parseInt(this.width,10),n=parseInt(this.height,10),e(".dimensions",i).text(""+r+" x "+n),i.data("resolution",r*n),s.push(i),t()},n.onerror=t,n.src=r}),i=e(".product-images"),o.on("click","[data-imageadd]",function(){var t,n,r,a;return n=e(this).data(),r=n.imageadd,t=null!=n.cover,a=e('<li>\n  <input type="hidden" name="files[]" value="'+r+'"/>\n  <img src="external-image/120/'+r+'"/>\n</li>'),null!=n.cover?(a.prepend(e('<input type="hidden" name="cover" value="'+r+'"/>')),i.prepend(a)):i.append(a),e(this).closest(".span3").hide(),!1})):void 0})(jQuery);